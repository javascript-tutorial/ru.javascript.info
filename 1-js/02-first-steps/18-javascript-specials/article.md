# Особенности JavaScript

В этой главе кратко пересказываются особенности JavaScript, которые мы уже изучили, уделяя особое внимание тонким моментам.

## Структура кода

Инструкции разделяются точкой с запятой:

```js run no-beautify
alert('Привет'); alert('Мир');
```

Обычно разрыв строки также рассматривается как разделитель, так что это тоже сработает:

```js run no-beautify
alert('Привет')
alert('Мир')
```

Это так называемая "автоматическая вставка точки с запятой". Впрочем, она не всегда срабатывает, например:

```js run
alert("После этого сообщения ждите ошибку")

[1, 2].forEach(alert)
```

Большинство руководств по стилю кода рекомендуют ставить точку с запятой после каждой инструкции.

Точки с запятой не требуются после блоков кода `{...}` и синтаксических конструкций с ними, таких как циклы:

```js
function f() {
  // после объявления функции точка с запятой не требуется   
}

for(;;) {
  // точка с запятой после цикла также не требуется
}
```

...Но даже если мы сможем поставить где-то "лишнюю" точку с запятой, это не будет ошибкой. Она будет просто проигнорирована.

Подробнee: <info:structure>.

## Строгий режим

Чтобы полностью задействовать все возможности современного JavaScript, мы должны начинать все скрипты с директивы `"use strict"`.

```js
'use strict';

...
```

Директива должна находиться в верхней части скрипта или в начале тела функции.

Без `"use strict"` все по-прежнему будет работать, но некоторые функции будут вести себя старомодным, “совместимым” способом. Как правило, мы предпочитаем современное поведение.

Некоторые современные функции языка (например, классы, которые мы будем изучать в будущем) неявно уже включают строгий режим.

Подробнee: <info:strict-mode>.

## Переменные

Можно объявить при помощи:

- `let`
- `const` (константа, т.е. изменению не подлежит)
- `var` (устаревший способ, рассмотрим позже)

Имя переменной может включать:
- Буквы и цифры, однако цифра не может быть первым символом.
- Символы `$` и `_` используются наряду с буквами.
- Иероглифы и символы нелатинского алфавита также допустимы, но обычно не используются.

Переменные являются динамически типизированными. Они могут хранить любое значение:

```js
let x = 5;
x = "Вася";
```

Всего существует 8 типов данных:

- `number` для целых и вещественных чисел,
- `bigint` для целых чисел произвольной длины,
- `string` для строк,
- `boolean` для логических значений: `true/false`,
- `null` – тип с единственным значением `null`, означающим "пустое значение" или "значение не существует",
- `undefined` – тип с единственным значением `undefined`, т.е. "значение не задано",
- `object` и `symbol` – что касается сложных структур данных и уникальных идентификаторов, то мы их ещё не изучили.

Оператор `typeof` возвращает тип значения с двумя исключениями:
```js
typeof null == "object" // ошибка в языке
typeof function(){} == "function" // функции обрабатываются особым образом
```

Подробнee: <info:variables>, <info:types>.

## Взаимодействие с посетителем

В качестве рабочей среды мы используем браузер, поэтому базовыми функциями взаимодействия с пользователем являются:

[`prompt(question, [default])`](https://developer.mozilla.org/ru/docs/Web/API/Window/prompt)
: Задайте вопрос `question` и верните либо то, что ввёл посетитель, либо `null`, если он нажал "Отмена".

[`confirm(question)`](https://developer.mozilla.org/ru/docs/Web/API/Window/confirm)
: Задайте вопрос и предложите выбрать между "Ок" или "Отмена". Выбор возвращается как true/false.

[`alert(message)`](https://developer.mozilla.org/ru/docs/Web/API/Window/alert)
: Выводит сообщение `message`.

Все эти функции являются *модальные окна*, они приостанавливают выполнение кода и не позволяют посетителю взаимодействовать со страницей до тех пор, пока он не ответит.

Например:

```js run
let userName = prompt("Введите имя", "Алиса");
let isTeaWanted = confirm("Вы хотите чаю?");

alert( "Посетитель: " + userName ); // Алиса
alert( "Чай: " + isTeaWanted ); // true
```

Подробнee: <info:alert-prompt-confirm>.

## Операторы

JavaScript поддерживает следующие операторы:

Арифметические
: Простые `* + - /`, а также деление по модулю `%` и возведение в степень `**`.

    Бинарный плюс `+` объединяет строки. И если какой-либо из операндов является строкой, то другой тоже преобразуется в строку:

    ```js run
    alert( '1' + 2 ); // '12', строка
    alert( 1 + '2' ); // '12', строка
    ```

Оператор присваивания
: Существует простое присваивание: `a = b` и комбинированнoe `a *= 2`.

Побитовые операции
Побитовые операторы работают с 32-разрядными целыми числами на самом низком битовом уровне: обратитесь к официальной [документации](https://developer.mozilla.org/ru/docs/Web/JavaScript/Guide/Expressions_and_Operators#битовые_(поразрядные)_операторы) или к разделу <info:bitwise-operators>, когда они понадобятся.

Условный оператор
: Единственный оператор с тремя параметрами: `cond ? resultA : resultB`. Если условие `cond` истинно, возвращается `resultA`, иначе – `resultB`.

Логические операторы
: Логические И `&&`, и ИЛИ `||` используют так называемое "ленивое вычисление" и возвращают значение, на котором оно остановилось (не обязательно `true` или `false`). Логическое НЕ `!` конвертирует операнд в логический тип и возвращает инвертированное значение.

Оператор нулевого слияния
: Оператор `??` предоставляет способ выбора определённого значения из списка переменных. Результатом `a ?? b` будет `a`, если только оно не равно `null/undefined`, тогда `b`.

Сравнение
: Проверка на равенство `==` значений разных типов конвертирует их в число (кроме `null` и `undefined`, которые равны друг другу и больше ничему), так что эти примеры равны:

    ```js run
    alert( 0 == false ); // true
    alert( 0 == '' ); // true
    ```

    Другие операторы сравнения также преобразуются  значения разных типов в число.

    Оператор строгого равенства `===` не выполняет преобразование: разные типы для него всегда означают разные значения.

    Значения `null` и `undefined` особенные: они равны `==` только друг другу, и не равны ничему другому.

    Операторы сравнения больше/меньше сравнивают строки посимвольно, остальные типы преобразуются в число.

Другие операторы
: Существуют и другие операторы, такие как запятая.

Подробнee: <info:operators>, <info:comparison>, <info:logical-operators>, <info:nullish-coalescing-operator>.

## Циклы

- Мы рассмотрели три вида циклов:

    ```js
    // 1
    while (condition) {
      ...
    }

    // 2
    do {
      ...
    } while (condition);

    // 3
    for(let i = 0; i < 10; i++) {
      ...
    }
    ```

- Переменная, объявленная в цикле `for(let...)`, видна только внутри цикла. Но мы также можем опустить `let` и переиспользовать существующую переменную.
- Директивы `break/continue` позволяют завершить весь цикл/текущую итерацию. Используйте метки для выхода из вложенных циклов.

Подробнee: <info:while-for>.

Позже мы изучим другие виды циклов для работы с объектами.

## Конструкция "switch"

Конструкция "switch" может заменить несколько проверок `if`. При сравнении она использует оператор строгого равенства `===`.

Например:

```js run
let age = prompt('Сколько вам лет?', 18);

switch (age) {
  case 18:
    alert("Не сработает"); // результатом prompt является строка, а не число
    break
    
  case "18":
    alert("Это работает!");
    break;

  default:
    alert("Любое значение, неравное значению выше");
}
```

Подробнee: <info:switch>.

## Функции

Мы рассмотрели три способа создания функции в JavaScript:

1. Function Declaration: функция в основном потоке кода

    ```js
    function sum(a, b) {
      let result = a + b;

      return result;
    }
    ```

2. Function Expression: функция как часть выражения

    ```js
    let sum = function(a, b) {
      let result = a + b;

      return result;
    };
    ```

3. Стрелочные функции:

    ```js
    // выражение в правой части
    let sum = (a, b) => a + b;

    // или многострочный синтаксис с использованием { ... }, здесь требуется return:
    let sum = (a, b) => {
      // ...
      return a + b;
    }

    // без аргументов
    let sayHi = () => alert("Привет");

    // с одним аргументом
    let double = n => n * 2;
    ```


- Функции могут иметь локальные переменные: т.е. которые объявлены внутри их тела или списка параметров. Такие переменные видны только внутри функции.
- Параметры могут иметь значения по умолчанию: `function sum(a = 1, b = 2) {...}`.
- Функции всегда что-то возвращают. Если оператор `return` отсутствует, то результат будет `undefined`.

Подробнee: <info:function-basics>, <info:arrow-functions-basics>.

## Ещё не всё

Это был краткий список возможностей JavaScript. На данный момент мы изучили только основы. Далее в руководстве вы найдёте больше особенностей и продвинутых возможностей JavaScript.
